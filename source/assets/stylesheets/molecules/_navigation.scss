/* ==========================================================================
//  Navigation modules
// ========================================================================== */

@import "../core/*";

/* Base
// -------------------------------------------------------------------------- */

[role="navigation"], nav, .nav {
    @include unstyled-list;

    a {
        &:hover, &:active { border-bottom: none; }
    }

    ul {
        margin: 0;
        padding: 0;
    }

    li {
        margin: 0;
        padding: 0;
    }
}

/* Modifiers
// -------------------------------------------------------------------------- */

/* ------- Global/main nav -------------------------------------------------- */
[role="navigation"].main,
nav.main,
.nav.main,
%nav--main {
    // @include inline-list;
    padding-top: 0;
    padding-bottom: 0;
    z-index: $z--high;

    li {
        display: block;

        @include breakpoint(400px) {
            display: inline-block;
        }
    }
}

/* ------- Local jump nav --------------------------------------------------- */
nav.jump,
.nav.jump,
%nav--jump {
    @include rem(top, fs(6));
    display: inline-block;
    position: absolute;
    width: 180px;
}

// modifiers to position the "active" highlight
// nav.is-above
// nav.is-left

/* Submodules
// -------------------------------------------------------------------------- */

.nav-item {
    @extend %base-transition;
    @extend %font-body--bold;
    @include rem(margin, 0 fs(3));
    @include rem(padding, fs(3) 0);
    @include font-scale(2);
    display: block;
    position: relative;
    text-transform: uppercase;
    color: theme(text tertiary, reverse);

    &:hover, &:active { color: theme(text primary, reverse); }

    &.is-active {
        $border-w: 6px;
        @include chapter_highlights(color);
        color: theme(highlight);
        // border-bottom: 4px solid theme(highlight);

        @include breakpoint(820px) {
            &:after {
                @include chapter_highlights(background-color);
                content: " ";
                display: block;
                position: absolute;
                top: -($border-w/2);
                left: 0;
                right: 0;
                height: $border-w;
                background-color: theme(highlight);

                .is-above & {
                    top: auto;
                    bottom: -($border-w/2);
                }

                .is-left & {
                    bottom: 0;
                    top: 0;
                    left: 0;
                    height: 100%;
                    width: $border-w;
                }
            }
        }

        // .top & {
        //     @include chapter_highlights(border-top-color color);
        //     border-bottom: none;
        //     border-top: 4px solid theme(highlight);
        // }
    }
}
