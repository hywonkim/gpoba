/* ==========================================================================
// Chapter module
// -> a major content area of the Annual Report
// -> in the print version, this is stuff in the table of contents
// ========================================================================== */

@import "../core/*";
@import "../atoms/heading";
@import "../atoms/text";
@import "../molecules/hero";

$chapter-padding: fs(6);

/* Base
// -------------------------------------------------------------------------- */

.chapter {
    // @include rem(padding-top, $chapter-padding);
    // @include rem(padding-bottom, $chapter-padding);
    position: relative;
}

/* Submodules
// -------------------------------------------------------------------------- */

.chapter-hero {
    @extend .hero;
    height: 370px;
    height: 70vh;
    margin-bottom: 0;

    &:first-child { margin-top: -($chapter-padding); }
}

.chapter-hero-lockup {
    @extend .hero-headline;
}

// headline lockup appearing in a hero
.chapter-hero-headline {
    @include rem(font-size, 54px);
    margin: 0;
    letter-spacing: -0.04em;
    line-height: 1;
    color: theme(bg);

    @include respond-to('xsmall') { @include rem(font-size, 68px); }
    @include respond-to('small') { @include rem(font-size, 76px); }
    @include respond-to('medium') { @include rem(font-size, 85px); }
    @include respond-to('large') { @include rem(font-size, 90px); }
}

// subtitle to chapter-headine
.chapter-hero-subtitle {
    @extend %delta;
    @extend %font-accent;
    display: block;
    letter-spacing: 0;
    color: theme(bg);
}

// the chapter title, generally not in a hero (see homepage)
.chapter-headline {
    position: relative;
    margin: 1em 0 0.4em;
    text-align: center;
    color: theme(text primary);

    @include respond-to('xsmall') { @include rem(font-size, 54px); }
    @include respond-to('medium') { @include rem(font-size, 68px); }
    @include respond-to('large') { @include rem(font-size, 72px); }
}

// section header
.chapter-subtitle {
    @extend %beta;
    text-align: center;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
    letter-spacing: -0.02em;
}

.chapter-section {
    @include border(top);
    @include rem(padding-top, fs(5));
    @include rem(padding-bottom, fs(5));

    &.first {
        border-top: none;

        p:first-of-type, p:first-child {
            @extend .lead;
        }
    }

    h3 {
        margin-top: 1em;
        margin-bottom: 0;
    }
}

.chapter-aside {
    @include rem(margin-top, fs(5));
    @include rem(padding-top, fs(5));
    @include rem(padding-bottom, fs(5));
    background-color: theme('well');

    // if this is the last thing in the container, make it flush with the bottom
    &:last-child {
        @include rem(margin-bottom, -($chapter-padding));
    }
}

.chapter-content {
    p:first-of-type, p:first-child {
        @extend .lead;
    }

    img { margin: 1em 0; }
}
